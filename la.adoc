== Logalert
image::la/la.png[]

=== !
Eksempel på alertfil
[source, toml]
----
Udv_Key = "osm2_services_osm2_angivelse_backend_003"
Udv_SearchString = 'besked: "Sending angivelse to Kafka failed"'
Udv_Severity = "ERROR"
Udv_EventDescription = "Afsendelse til Kafka har fejlet med teknisk fejl."
Udv_ApplicationReaction = "Sessionen stopper og returnerer intern fejl."
Udv_DriftAction = "Tjek at Kafka og forbindelsen er oppe."
Udv_ImpactDescription = "Angivelse modtages og behandles ikke."
Udv_StoryReference = "https://jira.dk/browse/OSM-8743"

Action = "Jira_Incident"
Approved = true

CheckInterval = "g"
ErrorThreshold = "a"
CoolDown = "g"

Udv_IncludeLogEntry = true
Udv_Note = ""
Action_Jira_Env = 'Prod'
System = "osm2"
----


=== !
Error handling og logging
[source, javascript]
----
include::logalert/server.js[]
----


=== !
Eksempel på kode dokumentation
[source, javascript]
----
include::logalert/functions/deleteDupsAndUpdateDocStore.js[]
----


=== !
Unit test af deleteDupsAndUpdateDocStore
[source, javascript]
----
include::logalert/functions/deleteDupsAndUpdateDocStore.test.js[]
----


//=== !
//isProblem.test.js
//[source, javascript]
//----
//include::logalert/functions/isProblem.test.js[]
//----


=== !
Konvertering af data uden API
[source, javascript]
----
include::logalert/functions/kqlToLucene.js[]
----

=== !
Test at UI'en ikke har ændret sig
[source, javascript]
----
include::logalert/functions/kqlToLucene.test.js[]
----

